
#
# i3 Gaps Config
#
# Adapted From https://github.com/ganifladi/linux/blob/master/config/i3/config
# By Richard Rabe
# i3 config file (v4)
#

# Border Size
set $bar-height  25
set $border-width 0

# Titlebar Font
font pango:System San Francisco Display 14

# Windows Key as Mod
set $mod Mod4

# Alt Key as Meta
set $alt Mod1

# VIM Movement
set $left   h
set $down   j
set $up     k
set $right  l

# Change Split Type
bindsym $mod+bar split h
bindsym $mod+minus split v

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Control Focused Window When Follows the Mouse Movements
focus_follows_mouse yes

# Start Terminal
bindsym $mod+Return exec i3-sensible-terminal -e zsh

# Nemo
bindsym $mod+n exec nautilus

# Quit Window
bindsym $mod+q kill
bindsym $alt+F4 kill
bindsym $mod+F4 kill
bindsym $mod+shift+q focus parent,kill
bindsym $alt+shift+F4 focus parent,kill
bindsym $mod+shift+F4 focus parent,kill

# Start Rofi
bindsym $mod+x exec --no-startup-id rofi -show combi  -font "System San Francisco 14"
bindsym $mod+r exec --no-startup-id rofi -show run    -font "System San Francisco 14"
bindsym $mod+b exec --no-startup-id rofi -show window -font "System San Francisco 14"

# Change Focus
bindsym $mod+$left  focus left
bindsym $mod+$down  focus down
bindsym $mod+$up    focus up
bindsym $mod+$right focus right
bindsym $mod+Left   focus left
bindsym $mod+Down   focus down
bindsym $mod+Up     focus up
bindsym $mod+Right  focus right

# Move Windows
bindsym $mod+Shift+$left    move left
bindsym $mod+Shift+$down    move down
bindsym $mod+Shift+$up      move up
bindsym $mod+Shift+$right   move right
bindsym $mod+Shift+Left     move left
bindsym $mod+Shift+Down     move down
bindsym $mod+Shift+Up       move up
bindsym $mod+Shift+Right    move right

# Fullscreen Window
bindsym $mod+f fullscreen toggle

# Change Container Layout
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Change Focus
# bindsym $mod+a focus parent
# bindsym $mod+s focus child

# Allow Pop-Ups in Fullscreen
popup_during_fullscreen smart

# Workspace Names
set $WS1 "1: "
set $WS2 "2: "
set $WS3 "3: "
set $WS4 "4: "
set $WS5 "5: "
set $WS6 "6: "
set $WS7 "7: "
set $WS8 "8: "
set $WS9 "Desktop "

# Switch to Workspace
bindsym $mod+1 workspace $WS1
bindsym $mod+2 workspace $WS2
bindsym $mod+3 workspace $WS3
bindsym $mod+4 workspace $WS4
bindsym $mod+5 workspace $WS5
bindsym $mod+6 workspace $WS6
bindsym $mod+7 workspace $WS7
bindsym $mod+8 workspace $WS8

# Fake Show Desktop
bindsym $mod+d workspace $WS9
bindsym $alt+d move container to workspace $WS1; workspace $WS1

# Move Current Window to Workspace
bindsym $mod+Shift+1 move container to workspace $WS1; workspace $WS1
bindsym $mod+Shift+2 move container to workspace $WS2; workspace $WS2
bindsym $mod+Shift+3 move container to workspace $WS3; workspace $WS3
bindsym $mod+Shift+4 move container to workspace $WS4; workspace $WS4
bindsym $mod+Shift+5 move container to workspace $WS5; workspace $WS5
bindsym $mod+Shift+6 move container to workspace $WS6; workspace $WS6
bindsym $mod+Shift+7 move container to workspace $WS7; workspace $WS7
bindsym $mod+Shift+8 move container to workspace $WS8; workspace $WS8

# Alt Tab
bindsym $alt+Tab workspace next
bindsym $mod+Tab workspace prev
bindsym Control+$alt+Tab workspace prev
bindsym Control+$mod+Tab workspace next

# Remove Screen Saver
exec --no-startup-id xset s off -dpms &

# Remove Bell
exec --no-startup-id xset b 0 0 0 &

# Correct Colors (On Dell)
exec --not-startup-id xgamma -rgamma 0.94 -ggamma 0.93 -bgamma 0.98

# Set Brightness
exec --no-startup-id light -S 42

# Mute Volume
exec --no-startup-id pactl set-sink-volume 0 0%

# Set Desktop Background
exec --no-startup-id feh --bg-fill ~/Pictures/bg.jpg

# Start Network
exec --no-startup-id nm-applet &

# Start Redshift
# exec --no-startup-id redshift &

# Start Notifications
exec --no-startup-id dunst -config ~/.config/dunst/dunstrc

# Start Compton
exec --no-startup-id compton -b --config ~/.config/compton/compton.conf

# Restore GNOME's settings
exec --no-startup-id /usr/libexec/gnome-settings-daemon-localeexec

# Fix a bug in gnome-settings-daemon: http://feeding.cloud.geek.nz/posts/creating-a-modern-tiling-desktop-environment-using-i3/
exec --no-startup-id dconf write /org/gnome/settings-daemon/plugins/cursor/active false

# Force Windows Onto Specific Workspaces
assign [class="Firefox"] $WS1
assign [class="Chromium"] $WS1
assign [class="Google-chrome"] $WS1
assign [class="Emacs"] $WS2
assign [class="Gnome-terminal"] $WS3
assign [class="Nemo"] $WS4
assign [class="Nautilus"] $WS4
assign [class="Evince"] $WS6
assign [class="Woofers 3D"] $WS6
assign [class="Eog"] $WS6
assign [class="(?i)libreoffice"] $WS6
assign [class="Xournal"] $WS6
assign [class="kalgebra"] $WS6
assign [class="Steam"] $WS5
assign [class="discord"] $WS7
assign [class="(?i)Spotify"] $WS8
for_window [class="Spotify"] move to workspace $WS8
assign [class="Rhythmbox"] $WS8
assign [class="Vlc"] $WS8

# Reload Config
bindsym $mod+Shift+c reload

# Restart i3
bindsym $mod+Shift+v restart

# Log Out
bindsym $mod+semicolon exec i3-msg exit

# Titlebar
# for_window [class=".*"] title_format "<span font='System San Francisco 13'>%title</span>"

# Border
new_window pixel $border-width

# Mousepad Glitch Fix
hide_edge_borders both

# Floating Windows
for_window [class="^python*"] floating enable
for_window [class="^nexus*"] floating enable
for_window [window_role="pop-up"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [title="Preferences$"] floating enable

# Gaps
gaps inner 60
gaps outer 30

# Simple Zoom
bindsym $mod+9 gaps inner all plus 30, gaps outer all plus 10
bindsym $mod+0 gaps inner all minus 30, gaps outer all minus 10

# Reisze Mode
set $mode_resize Resize
bindsym $mod+Shift+r mode "$mode_resize"
mode "$mode_resize" {
        bindsym $left   resize shrink width 10 px or 10 ppt
        bindsym $right  resize grow width 10 px or 10 ppt
        bindsym $down   resize grow height 10 px or 10 ppt
        bindsym $up     resize shrink height 10 px or 10 ppt

        bindsym Left    resize shrink width 20 px or 20 ppt
        bindsym Down    resize grow height 20 px or 20 ppt
        bindsym Up      resize shrink height 20 px or 20 ppt
        bindsym Right   resize grow width 20 px or 20 ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym Control+g mode "default"
        bindsym q mode "default"
}

set $bg-color 	         #2f343f
set $inactive-bg-color   #2f343f
set $text-color          #f3f4f5
set $inactive-text-color #676E7D
set $urgent-bg-color     #E53935
set $urgent-text-color   #313742

# Window Colors         Border              Background          Text                 Indicator
client.focused          $bg-color           $bg-color           $text-color          #00ff00
client.unfocused        $inactive-bg-color  $inactive-bg-color  $inactive-text-color #00ff00
client.focused_inactive $inactive-bg-color  $inactive-bg-color  $inactive-text-color #00ff00
client.urgent           $urgent-bg-color    $urgent-bg-color    $text-color          #00ff00
# client.focused          color2              $background $text   $border              $border

bar {
    # mode hide
    font pango:System San Francisco Display 14
    status_command i3blocks -c ~/.config/i3/i3blocks.conf

	colors {
		background $bg-color
	    separator #757575

		#                  Border             Background         Text
		focused_workspace  $bg-color          $bg-color          $text-color
		inactive_workspace $inactive-bg-color $inactive-bg-color $inactive-text-color
		urgent_workspace   $urgent-bg-color   $urgent-bg-color   $text-color
	}
}

# Toggle i3bar
bindsym --release $mod+o bar mode toggle

# Laptop Rotate
bindsym --release $mod+u exec --no-startup-id "xrandr -o 1; xsetwacom set 'Wacom HID 482E Finger touch' Rotate ccw; feh --bg-fill ~/Pictures/bg.jpg"
bindsym --release $mod+m exec --no-startup-id "xrandr -o 0; xsetwacom set 'Wacom HID 482E Finger touch' Rotate none; feh --bg-fill ~/Pictures/bg.jpg"


# Volume Keys
set $volume-increment 10%
bindsym --release XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +$volume-increment
bindsym --release XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -$volume-increment
bindsym --release XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle

# Srceen Brightness Controls
set $screen-increment 5
set $screen-increment-large 15
bindsym XF86MonBrightnessUp exec light -A $screen-increment
bindsym Shift+XF86MonBrightnessUp exec light -A $screen-increment-large
bindsym XF86MonBrightnessDown exec light -U $screen-increment
bindsym Shift+XF86MonBrightnessDown exec light -U $screen-increment-large

# Redshift
# bindsym --release $mod+ctrl+r exec ~/.local/bin/red.sh

# Lock Screen
bindsym $mod+Shift+semicolon exec --no-startup-id i3lock-next '' '' 1

# Screenshot
bindsym --release F12 exec --no-startup-id scrot /tmp/`date +%Y%m%d_%H%M%S`.png && exec notify-send 'SCROT' 'Screenshot taken (/tmp)'

# Standard Programs
exec_always google-chrome
exec_always emacs
exec_always gnome-terminal
exec_always nautilus
exec_always discord
